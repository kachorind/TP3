# Devina Kachorin
# 19 septembre 2023
# TP3 - le combat des monstres

import random

niveau_vie = 20
nombre_victoires = 0
nombre_defaites = 0
victoires_consecutives = 0


# Fonction pour afficher le menu de la partie
def menu():
    print("""
    Que voulez-vous faire?
    1. Combattre cet adversaire
    2. Contourner cet adversaire et aller ouvrir une autre porte
    3. Afficher les règles du jeu
    4. Quitter la partie
    """)

    # Fonction pour lancer un combat avec deux dés


def combattre(force_adversaire):
    global niveau_vie, nombre_victoires, nombre_defaites, victoires_consecutives

    de_1 = random.randint(1, 6)
    de_2 = random.randint(1, 6)
    deux_des = de_1 + de_2
    print(f"Lancer des dés : {de_1} + {de_2} = {deux_des}")

    if deux_des > force_adversaire:
        print("Victoire!")
        nombre_victoires += 1
        victoires_consecutives += 1
        niveau_vie += force_adversaire
    else:
        print("Défaite!")
        nombre_defaites += 1
        victoires_consecutives = 0
        niveau_vie -= force_adversaire

    print(f"Niveau de vie: {niveau_vie}")
    print(f"Nombre de victoires consécutives: {victoires_consecutives}")


# Boucle principale du jeu
while niveau_vie > 0:
    force_adversaire = random.randint(2, 10)  # Augmentation de la force pour tenir compte de deux dés
    print(f"Vous tombez face à face avec un adversaire de difficulté: {force_adversaire}")
    menu()

    choix = input("Entrez votre choix (1,2,3 ou 4): ")

    if choix == "1":
        combattre(force_adversaire)

        # Vérifie si l'usager a remporté 3 victoires consécutives
        if victoires_consecutives == 3:
            print(
                "Félicitations! Vous avez remporté 3 victoires consécutives.\nVous affrontez maintenant un adversaire spécial!")
            force_adversaire = random.randint(6, 15)  # Adversaire spécial plus puissant avec deux dés
            combattre(force_adversaire)
            victoires_consecutives = 0

    elif choix == "2":
        print("Vous contournez l'adversaire et allez ouvrir une autre porte.\nMalheureusement,vous avez une pénalité de 1 point de vie…")
        niveau_vie -= 1

    elif choix == "3":
        print("""Pour réussir un combat, il faut que la somme des valeurs des dés lancés soit supérieure à la force de l'adversaire. Une défaite a lieu lorsque la somme des valeurs des dés lancés par l'usager est inférieure ou égale à la force de l'adversaire.
         La partie se termine lorsque les points de vie de l'usager tombent sous 0. 
         L'usager peut combattre ou éviter chaque adversaire, dans le cas de l'évitement, il y a une pénalité de 1 point de vie.""")

    else:
        print(f"La partie est terminée, vous avez vaincu {nombre_victoires} monstre(s).\nMerci et au revoir...")
        break

    print(f"Adversaire: {force_adversaire}")
    print(f"Nombre de victoires: {nombre_victoires} vs Nombre de défaites: {nombre_defaites}")
